# 암호학

이더리움의 기반 기술 중 하나는 수학의 한 분야인 암호학이다.
이더리움 프로토콜은 현재 모든 통신이 암호화 되어 있지 않다. 향후에는 영 지식 증명과 동형 암호화 같은 고급 암호화 도구를 사용하여 여전히 합의를 가능하게 하면서도 암호화된 계산을 블록체인에 기록할 수 있을 것이다. 하지만 고급 암호화 도구를 제공할 준비는 마쳤으나 아직 배포되지는 않았다.

이 장에서는 이더리움에서 사용하는 암호 방식, 즉 개인키와 주소의 형태로 자금의 소유권을 제어하는 데 사용되는 공개키 암호화를 소개한다.

## 키와 주소

이더리움은 외부 소유 계정(EOA)과 컨트랙트 라는 두 가지 유형의 계정을 갖고 있다. 디지털 개인키, 이더리움 주소, 디지털 서명을 통해 외부 소유 계정의 이더 소유권을 확립한다. 개인키는 모든 사용자와 이더리움 간 상호작용의 핵심이다. 사실, 계정 주소는 개인키에서 직접 파생되고, 개인키는 계정이라고도 불리는 단일 이더리움 주소를 고유하게 결정한다.

공개키는 지갑 주소, 개인키는 PIN과 유사. 후자는 계정에 대한 제어권을 제공함.

## 공개키 암호화 암호화폐

공개키 암호화는 오늘날 정보 보안의 핵심이다. 처음 공개한 이 기법은 암호학 분야에서 대중의 관심을 불러 일으킨 기념비적인 돌파구였다.

이하 수학적 난제를 이용한 공개키, 개인키 암호화 내용이 나옴. (학창시절 지겹도록 했던 것)
이더리움은 타원 곡선 암호화 알고리즘을 활용하여 개인키와 디지털 서명을 사용 함.

이더리움에서는 공개키 암호화를 사용하여 공개미-개인키 쌍을 만든다. 개인키는 계정에서 자금을 지출하기 위해 트랜잭션에 서명해야 하는 디지털 서명을 만드는데 필요한 고유한 정보의 접근을 제어한다. 디지털 서명은 소유자 또는 컨트랙트 사용자를 인증하는 데도 사용한다. 이더리움 트랜잭션에서는 트랜잭션 자체의 세부사항이 메시지로 사용된다. 암호 수학은 메시지를 개인키와 결합하여 개인키를 알아야만 만들 수 있는 코드 생성 방법을 제공한다. 이 코드를 디지털 서명이라고 한다. 이더리움 트랜잭션은 기본적으로 특정 이더리움 주소로 특정 계정에 접근하는 요청이다. 자금을 이동하거나 스마트 컨트랙트와 상호작용 하기 위해 트랜잭션을 이더리움 네트워크로 보내면, 문제의 이더리움 주소에 해당하는 개인키로 생성된 디지털 서명도 함께 보내야 한다. 타원 곡선 수학이란 디지털 서명, 트랜잭션 세부 정보, 접근하려는 이더리움 주소가 일치하는지 확인하여 '누구나' 트랜잭션이 유효한지 확인할 수 있음을 의미한다. 이러한 확인 과정에는 개인키가 전혀 포함되지 않는다. 개인키는 개인 영역에 남아 있다. 그러나 검증 프로세스에서는 의심의 여지 없이 그 트랜잭션이 공개키에 대응되는 개인키를 가진 사람에 의해 만들어졌음을 확증할 수 있다. 

## 개인키

개인키는 단순히 무작위로 선택한 숫자다. 개인키의 소유권과 제어는 해당 주소를 승인하는 컨트랙트에 대한 접근뿐만 아니라 해당 이더리움 주소와 관련된 모든 자금에 대한 사용자 제어의 근원이다.

### 난수로 개인키 생성

컴퓨터의 마이크로폰 채널에서 나오는 우주 방사선 노이즈가 대안이 될 수 있다. 좀 더 정확히 말하자면, 개인키는 2^256보다 약간 작은 0이 아닌 매우 큰 숫자까지 가능하다.

이더리움은 2^256 즉, 10진수로 10^77의 숫자를 지원한다. 엄청나게 큰 숫자다. 따라서 누군가가 개인키를 추측하거나 스스로 같은 값을 선택 할 수 있는 가능한 방법은 현재 없다.

개인키 생성 프로세스는 오프라인 프로세스다. 그것은 이더리움 네트워크와의 통신이나 다른 사람과의 통신을 필요로 하지 않는다. 따라서 아무도 선택할 수 없는 숫자를 선택하려면 그것은 정말로 무작위적이어야 한다. 만약 본인이 직접 그 번호를 선택한다면, 다른 사람이 그것을 시도해서 같은 번호를 찾을 수 있는 확률이 너무 높다. 나쁜 난수 생성기를 사용하는 것은 복제하기가 훨씬 더 쉽기 때문에 더 나쁘다. 온라인 계정의 암호와 마찬가지로 개인키도 추측할 수 없어야 한다. 다행히도 개인키를 기억할 필요가 없으므로 가능한 한 최선의 접근 방식을 취할 수 있다. 즉, 진정한 무작위성이다.

## 공개키

이더리움 공개키는 타원 곡선에 있는 점으로 타원 곡선 방정식을 만족하는 x와 y 좌표의 집합을 의미한다.

이론 설명 쭉.

## 암호화 해시 함수

"암호화 알고리즘보다 단방향 해시 함수들이 현대 암호학을 더 잘 이끄는 견인차다."
이더리움 공개키를 주소로 변환하는 작업에서 해시 함수가 일부분을 차지하기 때문에 여기에서 해시 함수를 다룬다. 또한 데이터 확인에 도움이 되는 디지털 지문을 만드는데 사용할 수 있다.

해시 함수는 '임의 크기의 데이터를 고정된 크기의 데이터로 매핑하는 데 사용할 수 있는 모든 함수'다. 해시 함수에 대한 입력을 사전 이미지, 메시지 또는 단순히 입력 데이터라고 한다. 그리고 그 결과를 해시라고 한다. 암호화 해시 함수는 이더리움 같은 플랫폼을 보호하는 데 유용한 특정 속성을 갖는 특별한 하위 범주다.

암호 해시 함수는 임의 크기의 데이터를 고정 크기의 비트 열로 매핑하는 단방향 해시함수다. '단방향'특성은 결괏값 해시만 알고 있을 때, 입력 데이터를 다시 작성하는 것이 계산적으로 불가능함을 의미한다. 가능한 입력을 결정하는 유일한 방법은 각 후보에 일치하는 결과가 있는지 확인하면서 무차별 대입 검색을 수행하는 것이다. 검색 공간이 사실상 무한하다는 점을 고려할 때 작업이 실제로 불가능하다는 것을 쉽게 이해할 수 있다. 일치하는 해시를 만드는 일부 입력 데이터를 찾는다고 하더라도 원본 입력 데이터가 아닐 수 있다. 해시 함수는 '다대일'함수다. 동일한 결과에 해시 처리한 두 입력 데이터 집합을 찾는 것을 해시 충돌 찾기라고 한다. 간단히 말해서, 해시 함수가 좋을수록 해시 충돌이 덜 발생한다. 이더리움에서는 사실상 해시 충돌이 불가능하다.

- 결정론 : 주어진 입력 메시지는 항상 동일한 해시 결과를 생성한다.
- 검증성 : 메시지의 해시 계산은 효율적이다.
- 비상관성 : 메시지에 대한 작은 변화는 해시 출력을 너무 광범위하게 변경해야 해시 원본 메시지의 해시와 상관 관계가 없다.
- 비가역성 : 해시로부터 메시지를 계산하는 것은 불가능하다. 모든 가능한 메시지에 대한 무차별 검색과 같다.
- 충돌 방지 : 같은 해시 결과를 생성하는 2개의 서로 다른 메시지를 계산 하는 것은 불가능하다. 해시 충돌에 대한 저항은 특히 이더리움에서 디지털 서명 위조를 피하기 위해 중요하다. 이러한 속성을 조합하면 암호화 해시 기능이 다음과 같은 다양한 보안 어플리케이션에 유용하다.

## 어떤 해시 함수를 사용하고 있는가?

빈 문자열을 입력해보면 된다.
참고로 이더리움은 Keccak-256을 사용한다.

## 이더리움 주소

이더리움 주소는 16진수이며, 공개키 Keccak-256 해시의 마지막 20바이트에서 파생한 식별자다.
